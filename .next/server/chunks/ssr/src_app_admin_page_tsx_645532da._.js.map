{"version":3,"sources":["../../../../src/app/admin/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react'; // ‡πÄ‡∏û‡∏¥‡πà‡∏° useEffect\r\nimport { supabase } from '@/utils/supabase';\r\nimport './admin.css';\r\n\r\nexport default function AdminPage() {\r\n  // --- ‡∏™‡πà‡∏ß‡∏ô‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡πâ‡∏≠‡∏á ---\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    capacity: '',\r\n    image_url: ''\r\n  });\r\n\r\n  // --- ‡∏™‡πà‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏´‡πâ‡∏≠‡∏á (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏•‡∏ö) ---\r\n  const [classrooms, setClassrooms] = useState<any[]>([]);\r\n\r\n  // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡πâ‡∏≠‡∏á (‡πÄ‡∏≠‡∏≤‡∏°‡∏≤‡πÇ‡∏ä‡∏ß‡πå‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á)\r\n  const fetchClassrooms = async () => {\r\n    const { data } = await supabase\r\n      .from('classrooms')\r\n      .select('*')\r\n      .order('id', { ascending: true });\r\n    \r\n    if (data) setClassrooms(data);\r\n  };\r\n\r\n  // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤\r\n  useEffect(() => {\r\n    fetchClassrooms();\r\n  }, []);\r\n\r\n  const handleChange = (e: any) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô 1: ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡πâ‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà\r\n  const handleSubmit = async (e: any) => {\r\n    e.preventDefault();\r\n    if (!formData.name || !formData.capacity) {\r\n      alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏∏‡∏Ñ‡∏£‡∏±‡∏ö');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const { error } = await supabase\r\n        .from('classrooms')\r\n        .insert([{\r\n          name: formData.name,\r\n          capacity: parseInt(formData.capacity),\r\n          image_url: formData.image_url || null,\r\n          status: 'available'\r\n        }]);\r\n\r\n      if (error) throw error;\r\n\r\n      alert('‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡πâ‡∏≠‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!');\r\n      setFormData({ name: '', capacity: '', image_url: '' }); // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏ü‡∏≠‡∏£‡πå‡∏°\r\n      fetchClassrooms(); // ‡πÇ‡∏´‡∏•‡∏î‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà\r\n\r\n    } catch (error: any) {\r\n      alert(`Error: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô 2: ‡∏•‡∏ö‡∏´‡πâ‡∏≠‡∏á (New!)\r\n  const handleDelete = async (id: number) => {\r\n    if (!confirm('‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏•‡∏ö‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏µ‡πâ? (‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏à‡∏∞‡∏´‡∏≤‡∏¢‡πÑ‡∏õ‡∏î‡πâ‡∏ß‡∏¢‡∏ô‡∏∞)')) return;\r\n\r\n    try {\r\n      // ‡∏ï‡πâ‡∏≠‡∏á‡∏•‡∏ö‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏µ‡πâ‡∏Å‡πà‡∏≠‡∏ô (Foreign Key constraint)\r\n      await supabase.from('bookings').delete().eq('room_id', id);\r\n\r\n      // ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢‡∏•‡∏ö‡∏´‡πâ‡∏≠‡∏á\r\n      const { error } = await supabase.from('classrooms').delete().eq('id', id);\r\n\r\n      if (error) throw error;\r\n\r\n      alert('‡∏•‡∏ö‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö üëã');\r\n      fetchClassrooms(); // ‡πÇ‡∏´‡∏•‡∏î‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà\r\n\r\n    } catch (error: any) {\r\n      alert(`‡∏•‡∏ö‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <main>\r\n      <div className=\"container admin-container\">\r\n        <h1>üõ†Ô∏è ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (Admin)</h1>\r\n        \r\n        {/* --- ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 1: ‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡πâ‡∏≠‡∏á --- */}\r\n        <section className=\"admin-section\">\r\n          <h3>‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡πâ‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà</h3>\r\n          <form className=\"admin-form\" onSubmit={handleSubmit}>\r\n            <div className=\"form-group\">\r\n              <label>‡∏ä‡∏∑‡πà‡∏≠‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</label>\r\n              <input type=\"text\" name=\"name\" value={formData.name} onChange={handleChange} placeholder=\"‡∏ä‡∏∑‡πà‡∏≠‡∏´‡πâ‡∏≠‡∏á...\" />\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <label>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏∏</label>\r\n              <input type=\"number\" name=\"capacity\" value={formData.capacity} onChange={handleChange} placeholder=\"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏ô...\" />\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <label>‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û (URL)</label>\r\n              <input type=\"text\" name=\"image_url\" value={formData.image_url} onChange={handleChange} placeholder=\"https://...\" />\r\n            </div>\r\n            <button type=\"submit\" className=\"btn-submit\">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>\r\n          </form>\r\n        </section>\r\n\r\n        <hr className=\"divider\" />\r\n\r\n        {/* --- ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏´‡πâ‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà --- */}\r\n        <section className=\"admin-section\">\r\n          <h3>üìã ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏´‡πâ‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ({classrooms.length})</h3>\r\n          <div className=\"table-responsive\">\r\n            <table className=\"admin-table\">\r\n              <thead>\r\n                <tr>\r\n                  <th>ID</th>\r\n                  <th>‡∏ä‡∏∑‡πà‡∏≠‡∏´‡πâ‡∏≠‡∏á</th>\r\n                  <th>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏∏</th>\r\n                  <th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>\r\n                  <th>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {classrooms.map((room) => (\r\n                  <tr key={room.id}>\r\n                    <td>{room.id}</td>\r\n                    <td>{room.name}</td>\r\n                    <td>{room.capacity}</td>\r\n                    <td>\r\n                      <span className={room.status === 'busy' ? 'text-red' : 'text-green'}>\r\n                        {room.status}\r\n                      </span>\r\n                    </td>\r\n                    <td>\r\n                      <button className=\"btn-delete\" onClick={() => handleDelete(room.id)}>\r\n                        ‡∏•‡∏ö üóëÔ∏è\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </section>\r\n      </div>\r\n    </main>\r\n  );\r\n}"],"names":[],"mappings":"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"}