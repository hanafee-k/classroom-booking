{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/my-classroom-app/src/utils/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\r\nconst supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\r\n\r\nif (!supabaseUrl || !supabaseKey) {\r\n  throw new Error('Supabase URL or Key is missing!');\r\n}\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseKey);"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AACN,MAAM;AAEN;;AAIO,MAAM,WAAW,IAAA,8LAAY,EAAC,aAAa"}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["file:///D:/my-classroom-app/src/app/dashboard/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { supabase } from '@/utils/supabase';\r\nimport './dashboard.css';\r\n\r\ninterface Classroom {\r\n  id: number;\r\n  name: string;\r\n  capacity: number;\r\n  status: string;\r\n  image_url: string;\r\n  booked_by: string | null; // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏°‡∏≤‡∏£‡∏±‡∏ö‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏ô‡∏à‡∏≠‡∏á\r\n}\r\n\r\nexport default function DashboardPage() {\r\n  const [classrooms, setClassrooms] = useState<Classroom[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const fetchClassrooms = async () => {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('classrooms')\r\n        .select('*')\r\n        .order('id', { ascending: true });\r\n\r\n      if (error) throw error;\r\n      if (data) setClassrooms(data);\r\n    } catch (error) {\r\n      console.error('Error:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchClassrooms();\r\n  }, []);\r\n\r\n  // --- ‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á ---\r\n  const handleBooking = async (room: Classroom) => {\r\n    const userName = window.prompt(`‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á \"${room.name}\"\\n‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì:`);\r\n    if (!userName) return;\r\n\r\n    try {\r\n      // 1. ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥ (History)\r\n      await supabase.from('bookings').insert([{ room_id: room.id, student_name: userName }]);\r\n\r\n      // 2. ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏´‡πâ‡∏≠‡∏á + ‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏ô‡∏à‡∏≠‡∏á (booked_by)\r\n      const { error } = await supabase\r\n        .from('classrooms')\r\n        .update({ \r\n          status: 'busy',\r\n          booked_by: userName // <-- ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏ô‡∏à‡∏≠‡∏á‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ\r\n        })\r\n        .eq('id', room.id);\r\n\r\n      if (error) throw error;\r\n\r\n      alert('‚úÖ ‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!');\r\n      fetchClassrooms();\r\n\r\n    } catch (error: any) {\r\n      alert(`‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  // --- ‡∏Ñ‡∏∑‡∏ô‡∏´‡πâ‡∏≠‡∏á ---\r\n  const handleCancel = async (room: Classroom) => {\r\n    if (!confirm(`‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô‡∏´‡πâ‡∏≠‡∏á ${room.name} ‡πÉ‡∏ä‡πà‡πÑ‡∏´‡∏°?`)) return;\r\n\r\n    try {\r\n      // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡πà‡∏≤‡∏á ‡πÅ‡∏•‡∏∞‡∏•‡∏ö‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏ô‡∏à‡∏≠‡∏á‡∏≠‡∏≠‡∏Å (booked_by = null)\r\n      const { error } = await supabase\r\n        .from('classrooms')\r\n        .update({ \r\n          status: 'available',\r\n          booked_by: null \r\n        })\r\n        .eq('id', room.id);\r\n\r\n      if (error) throw error;\r\n\r\n      alert('üëå ‡∏Ñ‡∏∑‡∏ô‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!');\r\n      fetchClassrooms();\r\n\r\n    } catch (error: any) {\r\n      alert(`‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <main>\r\n      <div className=\"container dashboard-container\">\r\n        <header className=\"dashboard-header\">\r\n          <h1>üè´ ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</h1>\r\n          <p>‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÅ‡∏ö‡∏ö Real-time</p>\r\n        </header>\r\n\r\n        {loading ? (\r\n          <p className=\"loading-text\">‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</p>\r\n        ) : (\r\n          <div className=\"room-grid\">\r\n            {classrooms.map((room) => (\r\n              <div key={room.id} className=\"room-card\">\r\n                <div className=\"room-image\">\r\n                  <img src={room.image_url || 'https://placehold.co/600x400?text=No+Image'} alt={room.name} />\r\n                  <span className={`status-badge ${room.status}`}>\r\n                    {room.status === 'available' ? '‡∏ß‡πà‡∏≤‡∏á' : '‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏á'}\r\n                  </span>\r\n                </div>\r\n                \r\n                <div className=\"room-info\">\r\n                  <h3>{room.name}</h3>\r\n                  <p>üë• ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö: {room.capacity} ‡∏Ñ‡∏ô</p>\r\n                  \r\n                  {/* ‡∏ñ‡πâ‡∏≤‡∏´‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏á ‡πÉ‡∏´‡πâ‡πÇ‡∏ä‡∏ß‡πå‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏ô‡∏à‡∏≠‡∏á‡∏î‡πâ‡∏ß‡∏¢ */}\r\n                  {room.status === 'busy' && room.booked_by && (\r\n                    <div className=\"booker-info\">\r\n                      üîí ‡∏à‡∏≠‡∏á‡πÇ‡∏î‡∏¢: <strong>{room.booked_by}</strong>\r\n                    </div>\r\n                  )}\r\n\r\n                  {room.status === 'available' ? (\r\n                    <button className=\"btn-book\" onClick={() => handleBooking(room)}>\r\n                      ‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏µ‡πâ ‚úÖ\r\n                    </button>\r\n                  ) : (\r\n                    <button className=\"btn-cancel\" onClick={() => handleCancel(room)}>\r\n                      ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á ‚ùå\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </main>\r\n  );\r\n}"],"names":[],"mappings":"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"}}]
}