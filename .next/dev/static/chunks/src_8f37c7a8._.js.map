{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/my-classroom-app/src/utils/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\r\nconst supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\r\n\r\nif (!supabaseUrl || !supabaseKey) {\r\n  throw new Error('Supabase URL or Key is missing!');\r\n}\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseKey);"],"names":[],"mappings":";;;;AAEoB;AAFpB;;AAEA,MAAM;AACN,MAAM;AAEN;;AAIO,MAAM,WAAW,IAAA,iMAAY,EAAC,aAAa"}},
    {"offset": {"line": 23, "column": 0}, "map": {"version":3,"sources":["file:///D:/my-classroom-app/src/app/history/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { supabase } from '@/utils/supabase';\r\nimport './history.css';\r\nimport Navbar from '@/components/common/Navbar';\r\n\r\nexport default function HistoryPage() {\r\n  const [bookings, setBookings] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const fetchHistory = async () => {\r\n    try {\r\n      // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏ï‡∏≤‡∏£‡∏≤‡∏á bookings ‡πÅ‡∏•‡∏∞‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÑ‡∏õ‡∏´‡∏≤‡∏ï‡∏≤‡∏£‡∏≤‡∏á classrooms ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏≠‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡∏´‡πâ‡∏≠‡∏á‡∏°‡∏≤‡∏î‡πâ‡∏ß‡∏¢\r\n      // ‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡∏ï‡∏£‡∏á select: ‡πÄ‡∏£‡∏≤‡∏™‡∏±‡πà‡∏á classrooms(name) ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏°‡∏µ Foreign Key ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏Å‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà\r\n      const { data, error } = await supabase\r\n        .from('bookings')\r\n        .select('*, classrooms(name, image_url)')\r\n        .order('id', { ascending: false }); // ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏à‡∏≤‡∏Å‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡πÑ‡∏õ‡πÄ‡∏Å‡πà‡∏≤‡∏™‡∏∏‡∏î\r\n\r\n      if (error) throw error;\r\n      setBookings(data || []);\r\n    } catch (error: any) {\r\n      console.error('Error fetching history:', error);\r\n      // alert(error.message); // ‡∏õ‡∏¥‡∏î‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡∏£‡∏≥‡∏Ñ‡∏≤‡∏ç\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchHistory();\r\n  }, []);\r\n\r\n  // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢‡∏≠‡πà‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢‡πÜ\r\n  const formatDate = (dateString: string) => {\r\n    if (!dateString) return '-';\r\n    const date = new Date(dateString);\r\n    return date.toLocaleString('th-TH', {\r\n      dateStyle: 'medium',\r\n      timeStyle: 'short',\r\n    });\r\n  };\r\n\r\n  return (\r\n    <main>\r\n      <div className=\"container history-container\">\r\n        <h1>üìú ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h1>\r\n        <p>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö (‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏à‡∏≤‡∏Å‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î)</p>\r\n\r\n        {loading ? (\r\n          <p>‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</p>\r\n        ) : (\r\n          <div className=\"table-wrapper\">\r\n            <table className=\"history-table\">\r\n              <thead>\r\n                <tr>\r\n                  <th>‡∏•‡∏≥‡∏î‡∏±‡∏ö</th>\r\n                  <th>‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</th>\r\n                  <th>‡∏ú‡∏π‡πâ‡∏à‡∏≠‡∏á</th>\r\n                  <th>‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {bookings.map((item, index) => (\r\n                  <tr key={item.id}>\r\n                    <td>{bookings.length - index}</td>\r\n                    <td>\r\n                      <div className=\"room-cell\">\r\n                        {/* ‡πÄ‡∏ä‡πá‡∏Ñ‡∏Å‡πà‡∏≠‡∏ô‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• classrooms ‡πÑ‡∏´‡∏° (‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡∏´‡πâ‡∏≠‡∏á‡πÇ‡∏î‡∏ô‡∏•‡∏ö) */}\r\n                        {item.classrooms?.image_url && (\r\n                          <img src={item.classrooms.image_url} alt=\"room\" className=\"mini-thumb\" />\r\n                        )}\r\n                        <span>{item.classrooms?.name || '‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö‡∏ä‡∏∑‡πà‡∏≠‡∏´‡πâ‡∏≠‡∏á'}</span>\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"student-name\">{item.student_name}</td>\r\n                    <td className=\"timestamp\">{formatDate(item.booking_time || item.created_at)}</td>\r\n                  </tr>\r\n                ))}\r\n                \r\n                {bookings.length === 0 && (\r\n                  <tr>\r\n                    <td colSpan={4} style={{textAlign: 'center', padding: '20px'}}>\r\n                      ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏Ñ‡∏£‡∏±‡∏ö\r\n                    </td>\r\n                  </tr>\r\n                )}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </main>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;;AAOe,SAAS;;IACtB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAQ,EAAE;IAClD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,MAAM,eAAe;QACnB,IAAI;YACF,kFAAkF;YAClF,qFAAqF;YACrF,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,uIAAQ,CACnC,IAAI,CAAC,YACL,MAAM,CAAC,kCACP,KAAK,CAAC,MAAM;gBAAE,WAAW;YAAM,IAAI,0BAA0B;YAEhE,IAAI,OAAO,MAAM;YACjB,YAAY,QAAQ,EAAE;QACxB,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,2BAA2B;QACzC,gDAAgD;QAClD,SAAU;YACR,WAAW;QACb;IACF;IAEA,IAAA,0KAAS;iCAAC;YACR;QACF;gCAAG,EAAE;IAEL,4CAA4C;IAC5C,MAAM,aAAa,CAAC;QAClB,IAAI,CAAC,YAAY,OAAO;QACxB,MAAM,OAAO,IAAI,KAAK;QACtB,OAAO,KAAK,cAAc,CAAC,SAAS;YAClC,WAAW;YACX,WAAW;QACb;IACF;IAEA,qBACE,6LAAC;kBACC,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;8BAAG;;;;;;8BACJ,6LAAC;8BAAE;;;;;;gBAEF,wBACC,6LAAC;8BAAE;;;;;yCAEH,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBAAM,WAAU;;0CACf,6LAAC;0CACC,cAAA,6LAAC;;sDACC,6LAAC;sDAAG;;;;;;sDACJ,6LAAC;sDAAG;;;;;;sDACJ,6LAAC;sDAAG;;;;;;sDACJ,6LAAC;sDAAG;;;;;;;;;;;;;;;;;0CAGR,6LAAC;;oCACE,SAAS,GAAG,CAAC,CAAC,MAAM,sBACnB,6LAAC;;8DACC,6LAAC;8DAAI,SAAS,MAAM,GAAG;;;;;;8DACvB,6LAAC;8DACC,cAAA,6LAAC;wDAAI,WAAU;;4DAEZ,KAAK,UAAU,EAAE,2BAChB,6LAAC;gEAAI,KAAK,KAAK,UAAU,CAAC,SAAS;gEAAE,KAAI;gEAAO,WAAU;;;;;;0EAE5D,6LAAC;0EAAM,KAAK,UAAU,EAAE,QAAQ;;;;;;;;;;;;;;;;;8DAGpC,6LAAC;oDAAG,WAAU;8DAAgB,KAAK,YAAY;;;;;;8DAC/C,6LAAC;oDAAG,WAAU;8DAAa,WAAW,KAAK,YAAY,IAAI,KAAK,UAAU;;;;;;;2CAZnE,KAAK,EAAE;;;;;oCAgBjB,SAAS,MAAM,KAAK,mBACnB,6LAAC;kDACC,cAAA,6LAAC;4CAAG,SAAS;4CAAG,OAAO;gDAAC,WAAW;gDAAU,SAAS;4CAAM;sDAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAYnF;GAxFwB;KAAA"}}]
}